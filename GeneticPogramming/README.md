# 遺傳算法因子挖掘
## 簡述
使用 deap 包進行因子挖掘，基本原因表表達類型算法，其借鑒了生物學基本原因的進化思想，它是不斷進化和演進的更好解決方案。在專案這個部分我們隨機生成因子種群，並進化變異出新的後代，計算其適應度。留下適應度優良的群體進化，找出更好的因子表達式。
## 環境
## 代碼邏輯
## 文獻閱讀
* 證券研究報告
    * 基于基因表达式规划的价量因子挖掘-天風
        * 簡介  
        在短周期价量数据构造的因子中，大部分因子选股效果的单调性并不显著，还有很 多因子的多头没有超额收益，因此在设置因子有效性筛选指标时，我们结合了因子的 ICIR、多头超额收益以及分组收益的单调性，综合考察因子的选股效果，实际挖掘出的因也具有较为单调和显著的选股效果。
        * 终结符  
            * VWAP 均价
            * TURN 换手率
        * 函数符
            * `效果還好`
            * 𝑡𝑠_𝑎𝑟𝑔𝑚𝑎𝑥(𝑎, 𝑏) 2 过去 b 天 a 的最大值的下标
            * 𝑡𝑠_𝑎𝑟𝑔𝑚𝑖𝑛(𝑎, 𝑏) 2 过去 b 天 a 的最小值的下标
            * 𝑡𝑠_𝑎𝑟𝑔𝑚𝑎𝑥𝑚𝑖𝑛(𝑎, 𝑏) 2 过去 b 天 a 最大值的下标-过去 b 天 a 最小值的下标   
            * `可以試試看`
            * 𝑡𝑠_𝑟𝑒𝑔𝑏𝑒𝑡𝑎(𝑎, 𝑏, 𝑐) 3 过去 c 天 a 对 b 回归的系数
            * 𝑡𝑠_𝑤𝑚𝑒𝑎𝑛(𝑎, 𝑏) 2 过去 b 天 a 的衰减均值，衰减系数为 1 到 b



            ![](https://i.imgur.com/o4psma5.png)
        * 適應度
            * 有 IC 均值
            ![](https://i.imgur.com/JzaGRfZ.png)
            * ICIR
            ![](https://i.imgur.com/6qlS0M0.png)
            * 多空收益
            * 多头 IR
            ![](https://i.imgur.com/XNgvoCc.png)
            * 分组检验单调性
            ![](https://i.imgur.com/q3BJcO4.png)
            ![](https://i.imgur.com/PXFQT2c.png)
        * 算法
            * 最大適應度低於 fit_min
            * n round沒有進化
            * 我们的主要操作思路是，首先将所有计算过的因子按 𝑓𝑖𝑡𝑛𝑒𝑠𝑠 降序排列，每 𝑠𝑝𝑙𝑖𝑡_𝑛𝑢𝑚个因子为一块，在每一块中，优先入选 𝑓𝑖𝑡𝑛𝑒𝑠𝑠 较高的因子，将和其相关系数绝对值超过𝑐𝑜𝑟𝑟_ 𝑡 的因子剔除。然后将每一块中所有筛选后的因子重新汇合后再按 𝑓𝑖𝑡𝑛𝑒𝑠𝑠 降序排列，重新分块并迭代多次该过程，直到获得一个较小的因子集合。
            * ![](https://i.imgur.com/5N7pC1E.png)





        

* 論文